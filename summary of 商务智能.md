# （一）课程内容概要

## 一、商务智能简介

### 1.教材与课程概要

​		商务智能（第三版）

​		数据仓库

​		数据挖掘·概念与技术

​		数据仓库工具箱

### 2.商务智能的起源

#### 2.1数据库系统的发展

​		1968 IBM提出层次IMS

​		1969 美CODASYL提出网状DBTG标准

​		1970 IBM的E.F.Codd提出关系模型

​		20世纪70年代以层次、网状为主流

​		20世纪80年代关系系统逐渐代替层次与网状模型

​		以关系型数据库为基础，建立大量业务系统和信息系统，累计大量数据

​		与此同时，还有计算平台的发展和采集手段的发展

#### 2.2数据爆炸

#### 2.3知识值链：数据、信息、知识

#### 2.4企业的新问题（为什么需要商务智能）

​		数据如何转化为信息

​		如何解决信息的可访问性、及时性、表达格式和完整性

​		早期方案：基于主机的查询与报表

​		第二代方案：数据仓库

​		为什么需要商务智能：为企业提供应用程序和商务解决方案，而不仅仅是技术。

#### 2.5商务智能

​		商务：Buying and selling

​		智能：人工智能（图灵测试、专家系统）

​		目标：决策支持、改善信息访问、将数据转换为有意义的内容、访问钻研分析和挖掘数据获得启发和了解，从而提供更完善和更全面考虑的决策支持。

### 3.商务智能的构件

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec1/5.png)

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec1/6.png)

​		数据源、数据仓库、分析和展现层

#### 3.1数据源

​		商务智能中的所有数据均来源于数据源

​		数据源包括：操作型数据库、历史数据、外部数据、数据仓库中的信息、相关的数据库和数据结构

​		数据源存在于不同的平台、既可以是格式化的也可以是非格式化的

#### 3.2数据仓库

##### 概要

​		数据仓库是BI的重要组成部分和数据基础、其典型工作是要对集成、清洗、聚集、预计算和查询任务所需要的大量数据进行批处理。

​		主要技术：数据提取、转换和装载，数据管理，数据访问，元数据

##### ETL

​		数据抽取、转换和装载（ETL）的过程：辨识与主题相关的原始数据、开发数据抽取策略、将原始数据转换为目标规格、将原始数据加载到预定目标区域

​		数据目标：原子层和集成数据、数据集市、操作数据存储、缓冲区

##### 数据管理

​		存储、索引和备份；不仅管理关系数据库中的数据，而且管理数据立方体中的多维数据

##### 数据访问

​		一种或多种访问数据仓库中的数据的方式

##### 元数据

​		关于数据的数据，是如何管理数据仓库的重要数据

#### 3.3分析和展现层

##### 报表和查询

​		针对不同商业用户的报表和查询

​		定制报表和定制查询的能力

​		非限定的报表和查询种类

##### 联机分析处理

​		提供一种快速的、交互式的、相互融合的信息访问方式

​		切片、切块、旋转、数据概括、数据细化

##### 数据统计

​		数据统计是将数据中含有的信息概括为统计值

​		典型的数据统计方法有：关系分析、要素分析、回归分析

##### 数据挖掘

​		对数据库（数据仓库）中蕴涵的、未知的、非平凡的、有潜在应用价值的模式的提取；用于发掘数据中隐藏的模式；借鉴各种相关领域的理论和方法；用于发现隐藏模式的算法既可以是自动进行，也可以在人工指导下完成。

### 4.商务智能的解决方案

​		IBM、ORACLE、MICROSOFT、SYBASE、SAP、云平台

​		HDFS、MAP REDUCE、HIVE

### 5.商务智能的发展方向

​		分布式的商务智能、插件化集成的商务智能、大众化的商务智能、在线商务智能、零滞后的商务智能、非结构化数据基础上的商务智能。

## 二、Data Warehouse数据仓库

### 1.从数据库到数据仓库

#### 1.1事务处理应用中的数据库技术

​		数据库技术的进步：关系数据模型的出现极大地促进了数据库技术地发展和联机事务处理技术的发展

​		数据量的变化：数据库中的数据量在不断增大

#### 1.2操作型/分析型

​		随着市场竞争的加剧、企业需求的发展以及数据量的不断增大，数据处理被划分为两大类：

​			操作型处理、分析型处理

​		所面向的数据被划分为两大类：

​			操作型数据、分析型数据

##### 操作型处理

​		也叫事务处理，是指对数据库的日常联机访问操作，通常是对一个或一组记录的查询和修改，主要是为企业特定的应用服务的，所以也叫联机事务处理。

​		**On-Line Transaction Processing OLTP**：通常仅仅是对一个或一组记录的查询或修改；查询简单，但执行频率高；人们关心的是处理的响应时间、数据的安全性和完整性等指标。

##### 分析型处理

​		也叫做信息型处理，主要用于企业管理人员的决策分析，为制订企业的未来经营管理计划提供辅助决策信息。

​		典型的分析型处理：**决策支持系统**

##### 操作型数据/分析型数据

​		在现代计算机信息系统中，数据的作用有两个方面：事务处理和分析处理（数据分析），不同的用户（处理）需要不同的数据信息。

​		操作型数据：事务处理所需要的细节性的数据，是面向企业员工的日常业务处理过程的，通常由数据库管理系统来负责其存储与管理。

​		分析型数据：分析处理所需的综合性数据，是面向企业管理人员的决策需要的。

##### 信息系统的发展历史

​		TPS-MIS-EIS-DSS-OLAP/DM：事务处理系统、管理信息系统、主管信息系统、决策支持系统和OLAP/DM

​		90年代之前使用数据库方式；90年代之后使用数据仓库方式。

#### 1.3决策支持系统

​		是上世纪70年代兴起的一种计算机应用技术，用于帮助企业领导作辅助性决策。

​		事务处理环境和分析处理（事务处理环境不适合建立DSS的原因）：为了进行分析型数据的处理，人们在关系数据库中放宽了对冗余的限制，引入了统计及综合数据，在事务处理环境下建立了传统的DSS。但是其在分析处理的支持不能令人满意：数据只为职员服务，不为老板服务。（问题：事务处理和分析处理的性能特性不同、数据集成问题、数据的动态集成问题、历史数据问题、数据的综合问题、数据的访问问题。）

​		数据仓库出现的原因：将数据仓库和操作型数据库分离开来，从而：提高两个系统的性能；提高操作型数据库的事务吞吐量；两个系统中数据的结构、内容和用法不同。

### 2.数据仓库及其四大特征

#### 2.1数据仓库的定义

​		数据仓库就是一个面向主题的、集成的、非易失的、时变的数据集合，用于支持经营管理过程中的决策制定。

​		数据仓库将分布在企业网络中不同信息岛上的商业数据集成到一起，存贮在一个单一的集成关系数据库中。利用这种集成信息，可方便用户对信息的访问，更可使决策人员对一段时间内的历史数据进行分析，研究事物发展走势。

#### 2.2数据仓库的特征

​		面向主题、集成、非易失、时变

##### 面向主题

###### 什么是面向应用的数据组织？

​		表达数据流程、和业务中的单据或文档对应、逻辑数据不完全分离、和部门组织相关

​		实现了OLTP，但没有实现真正的数据与应用分离

###### 什么是主题

​		主题是较高层次上将企业信息系统中的数据综合、归类并进行分析利用的抽象。在逻辑意义上，是对应企业中某一宏观分析领域涉及的分析对象。

###### 什么是面向主题

​		面向主题是指数据仓库内的信息是按主题进行组织的，为按主题进行决策的过程提供信息。

​		数据仓库是面向分析、决策人员的主观要求的。

###### 如何面向主题

​		如果按照面向主题的方式进行数据组织，首先应该抽取主题，而与每个主题相关的数据又与有关的事务处理所需的数据不尽相同。

​		在每个主题中，都包含了有关该主题的所有信息，同时又抛弃了与分析处理无关或不需要的数据，从而将原本分散在各个操作性处理系统的有关信息集中在一个主题中，形成有关该主题的一个完整一致的描述。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/6.png)

​		不同的主题有重叠的内容，但这种重叠：是逻辑上的，是部分细节上的，可以反映不同主题之间的直接和间接的联系。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/7.png)

###### 每个主题所需的物理存储

​		多维数据库：用多维数组形式存储数据

​		关系数据库

##### 集成

​		数据仓库中的数据必须从多个数据源中获取。这些数据源包括多种类型数据库、文件系统以及Internet网上数据等，它们通过数据集成形成数据仓库中的数据。

​		集成的方法：统一、综合。

##### 非易失

​		数据仓库的数据与操作性数据环境隔离

​		数据仓库中的数据是经过抽取而形成的分析型数据，不具有原始性，执行的主要是“查询”操作，一般情况下不执行“更新”操作。一个稳定的数据环境也有利于数据分析操作和决策的制订。

​		数据仓库的存储管理相对于DBMS简单得多。

##### 时变

​		带有时间属性，以一定时间段为单位进行统一更新。

### 3.数据仓库的基本结构

​		狭义的数据仓库不仅仅包含数据，还包含OLAP等。

​		广义的数据仓库还包括数据集成ETL

#### 3.1数据源

​		数据源和数据仓库是并列关系而非从属关系。

##### 多数据源

​		数据仓库的数据来源于多个数据源，这些数据源的数据格式可能不同，数据操作平台可能不同，数据的物理位置可能不同。

##### 数据源可以递归

​		数据仓库的数据源可以是另外一个数据仓库，也可以是基于本数据仓库的分析型应用。

##### 数据源的抽取

​		使用专业的数据抽取软件

##### 常见的数据源

​		流行的关系数据库系统：Oracle，Sybase，SQL Server，DB2等

​		面向对象数据库系统：Objectstore等

​		传统的桌面数据库系统：foxbase，foxpro等

​		文件系统中的数据文件：UNIX，WINDOWS等

​		其它数据源：word，excel等

#### 3.2数据目标

​		有四类：原子层和集成数据、数据集市、操作数据存储、缓冲区

##### 原子层和集成数据(简单介绍)

​		原子层：数据仓库的基础，上层分析型应用的数据来源，所有战略分析型数据的基础。具有以下特点：

​		保证历史集成性

​		拥有数据仓库最低细节数据

​		原子层的构建是迭代的

​		原子层的数据结构是面向企业的

​		原子层可以是集成的

​		原子层是静态的

###### 历史完整性

###### 粒度

​		对数据仓库中的数据的综合程度的一个度量

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/12.png)

###### 多重粒度

​		![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/13.png)

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/14.png)

​		能够应对不同级别的粒度要求

​		大粒度数据：快速存储设备、提高性能

​		小粒度数据：低速存储设备、满足细节查询

###### 多维度、多层次

​		数据仓库是多维度多层次的

##### 数据集市

##### 操作数据存储

​		操作数据存储在企业范围内，针对特定主题曲艺，用于支持战术决策支持的综合数据的更新集合。具有以下特点：面向特定分析应用、完整性、当前有效、可变的、详尽的。

##### 缓冲区

​		数据流的中间站

​		白板式，无特定结构

​		系统中可能存在多处缓冲区

#### 3.3数据仓库的关键技术

​		数据的ETL（抽取、转换和装载）、存储和管理、数据的访问和表现、元数据

##### ETL

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/9.png)

​		异构数据源、抽取：不同颜色代表不同的数据形式（数据结构、编码等），最后形成一个数据。

​		解析、校正、标准化、增补：解析——确定数据之间的差异；校正——校正数据中的错误；标准化——性别、整数、浮点数、布尔值、字符值；增补——通过合理推理、投骰子、数据挖掘等方式来完成补充。我们需要综合考虑、谨慎选择方法，因为不同的补充算法的复杂度下不断提高。

###### 数据抽取

​		数据仓库中的数据来源于数据源，将数据源中数据通过网络进行抽取，并经加工、转换、综合后形成数据仓库中的数据，这就是数据仓库的数据抽取。

​		数据的抽取是数据进入仓库的入口。它必须屏蔽底层数据的结构复杂性和物理位置的复杂性，同时还要实现对仓库中数据的自动刷新。

###### 数据刷新

​		经过抽取进入数据仓库的数据，经过一段时间后要重新修正，修改那些过时的数据，保存那些不变的数据，此种动作称为数据仓库的数据刷新。数据刷新的过程与抽取类似，但刷新的数据量往往小于抽取的数据量。

###### 转换和集成的复杂性

​		过于多且无用（二十多条），不多阐述。

###### ETL工具

​		大致分为两类：产生源代码的软件，产生参数化的运行时模块的软件。

​		产生源代码的软件比运行时软件要强大，它可以以原有数据的格式对它们进行访问。

##### 存储和管理

​		数据仓库的组织管理方式决定了它有别于传统数据库的特性，同时也决定了其对外的数据表现形式。

###### 数据仓库管理系统

​		数据仓库管理系统用于管理、统计分析型数据，其管理方法与传统关系数据库管理系统类似，因此，一般采用传统的关系数据库管理系统或其变种来进行数据仓库管理。

###### 数据仓库建模

​		参见数据仓库设计。

##### 数据的访问和表现

​		通过第三方工具软件来完成。

##### 元数据

​		关于数据的数据，描述了数据的结构、内容、编码、索引等内容

​		通过元数据可以将数据仓库和复杂的数据源系统的变化隔离，是数据仓库开发和维护的一个关键因素，也是保证数据抽取质量的依据。

​		有四个主要类型：关于数据源的元数据、关于数据模型的元数据、关于数据仓库映射的元数据、关于数据仓库使用的元数据。

###### 关于数据源的元数据

​		它是现有的业务系统的数据源的描述信息。这类元数据是对不同平台上的数据源的物理结构和含义的描述。

###### 关于数据模型的元数据

​		描述了数据仓库中有什么数据以及数据之间的关系。它们是用户使用、管理数据仓库的基础。可以支持用户从数据仓库中获取数据。

###### 与数据仓库映射相关的元数据

​		描述了数据源中的数据到数据仓库中的数据的转换过程。

###### 关于数据仓库使用的元数据

​		这类元数据是数据仓库中信息使用情况的描述。

###### 元数据管理

​		元数据一般存放于数据仓库中并受元数据管理系统的管理，这被称为元数据管理。

#### 3.4数据刷新

​		数据刷新的方法包括：时间戳、DELTA文件、建立映象文件、日志文件

##### 时间戳

​		数据库中的记录有时间属性，则可根据OLTP数据库中的数据有无更新

##### DELTA文件

​		避免对整个数据库的对比扫描，具有较高的刷新效率

##### 建立映象文件

​		在上一次数据刷新后对数据库做一次快照

​		在本次刷新之前再做一次快照

​		比较两个快照不同，从而确定数据仓库的数据刷新操作

##### 日志文件

​		根据OLTP数据库的日志信息实现数据仓库的数据刷新

#### 3.5数据周期

​		所谓数据周期是指从操作型环境中的数据发生变化起，到这个变化反映到数据仓库中所用到的时间。通常，数据周期不低于24小时。

#### 3.6数据仓库的数据组织形式&快照

###### 数据组织形式

​		简单堆积文件、轮转综合文件、简化直接文件、连续文件

###### 快照

​		快照通常包括：关键字，标志快照的关键字；

​		时间，标志事件发生的时间单元；

​		非关键字的主要数据，与关键字相关联的主要非关键字数据

​		二级数据。在形成快照时偶然捕获并被置入快照中的数据

### 4.数据集市与数据仓库

#### 4.1建立数据集市的原因

​		在网络环境中，即使存在多个可用的数据源，但是最终用户可能仍然得不到什么可用的信息。

​		早期的数据仓库概念仅仅提供一个多数据源的数据集成功能，为最终用户访问多个数据源提供统一的数据视图和访问接口。

​		作为一种反映主题的全局性数据组织，数据仓库提供——

​		统一的数据模式 统一的数据表示 统一的数据属性

​		然而，全局性数据仓库往往太大，在实际应用中将它们按部门或个人分别建立反映各个子主题与区域的局部性数据组织，它们即是数据集市。因此，有时我们也称它为部门数据仓库。

#### 4.2数据仓库/数据集市体系

​		一个完整的数据仓库/数据集市体系结构一般由三个层次构成，他们是：数据源、数据仓库，数据集市（非必要，按需确定是否存在）

​		![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/21.png)

#### 4.3数据集市

​		数据仓库和数据集市的关系类似于传统关系数据库系统中的基表与视图的关系。

​		特点：面向主题、存储了预聚集数据、特定分析需求或用户群快速获取信息、体现终端用户的观点，面向数据仓库的界面、多层次多维度

#### 4.4数据集市的两种类型

​		独立型数据集市、从属型数据集市

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/22.png)

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/23.png)

#### 4.5数据仓库与数据集市的关系

##### 自顶向下的结构

​		优点：减轻数据仓库负载、任意处理数据、转换和整合在DW阶段统一完成、具备数据缓冲功能。

​		缺点：成本高、见效慢、数据集市之间不共享资源

##### 自底向上的结构

​		优点：见效快、启动资金少

​		缺点：各个部门要进行数据清理整合，数据不一致

##### 总线结构

​		优点：共享维表和事实表，解决了建立数据集市的许多问题

​		缺点：这种结构基于多维模型，应用限制于OLAP

##### 企业级数据集市结构

### 5.数据仓库的应用

​		数据资源的利用方式主要有三种：数据资源的查询服务、数据资源的演绎、数据资源的归纳。剩下的都是例子了。

## 三、OLAP

### 1.联机分析处理（OLAP）

#### 1.1从联机事务处理到联机分析处理（OLTP->OLAP）

​		数据量指数增长，兼顾事务操作和分析操作在性能上越来越不可能。OLAP应运而生。

#### 1.2OLAP

​		是针对特定问题的联机数据访问和分析。

#### 1.3OLAP VS OLTP

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/1.png)

### 2.OLAP的特征及衡量标准

#### 2.1Codd关于OLAP的评价准则

​		提供多维概念视图，透明性准则，存取能力准则，稳定的报表功能，客户/服务器体系结构，维的同等性原则，动态的稀疏矩阵处理准则，多用户支持能力准则，非受限的跨维操作，直观的数据操作，灵活的报表生成，不受限维与聚集层次。

#### 2.2FASMI

​		FAST ANALYSIS SHARED MULTIMENSIONAL INFORMATION

#### 2.2另一个评价准则（FASMI）

### 3.OLAP的几个基本概念

#### 3.1度量值

​		在分析型处理中，关心和分析的对象

#### 3.2维

​		观察度量值的角度，例如，可以从“时间维度、商品维度、地域维度”三个维度来观察销售金额这个度量值。

​		时间维：日月季年，日月年，日周年等

​		地域维：市、省、国、洲

​		商品：类别（……）、价格（……）、供应商（……）、顾客信息（……）

##### 维成员

​		维的一个取值称为该维度的一个“维成员”。

##### 多维数组

​		（维1，维2，……，维n，变量）

​		维x表示我们观察该度量值的角度

​		变量为观察到的度量值

##### 数据单元

​		当多维数组的每一维都选中一个维成员，这些维成员的组合唯一确定了一个度量值，这样的一个值或存放该值的地方我们称为一个数据单元。

#### 3.3层

​		在分析型应用中，对度量值可以在不同的深度层面上进行分析与观察，并可能得到不同的分析结果。一般而言，“层”与“维”关联。一个维度允许存在若干层和多种不同的层次划分方法。

##### 多维数组和联机分析处理

​		在一个分析型应用中需要若干个度量值，以它们为聚焦点作不同角度与深度的分析，可以得到多种不同的统计分析结果。为了更快查到这些统计分析结果，OLAP需要解决以下两个问题：

​		OLAP的数据构造方式

​		OLAP的基本数据模型

### 4.OLAP的数据构造方式

​		ROLAP（Relational OLAP）用传统的关系数据库管理系统（RDBMS）管理，将星形模式用二维表形式存储，表间用关键字相连，从而构成一个关系模式，它称为ROLAP。

​		MOLAP（Multi-Dimensional OLAP）用“多维数据库管理系统”管理，多维数据库采用的基本数据模型就是“多维数组”。

​		HOLAP 混合联机分析处理：试图将MOLAP和ROLAP进行融合，从而在大量数据上获得高效率。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/8.png)

​		OLAP需要解决的问题：OLAP服务器必须提高对OLAP数据的访问效率。

### 5.OLAP的基本数据模型

#### 5.1OLAP的基本数据模型

​		MOLAP使用的是多维数据库（MDDB）

​		ROLAP使用的是两种ROLAP数据模型（星形模型、雪花模型）

#### 5.2多维联机分析处理MOLAP

​		1.使用多维数据库存放数据

​		2.MOLAP适用于需要高速处理的复杂分析

​		3.维护多维数组要占用大量资源

##### 多维数据库存取

​		经过压缩、由类似于数组的对象构成，带有高度压缩的索引及指针结构。

​		MDDB必须具有高效的稀疏数据处理能力，使其掠过零元、缺失和重复数据

​		使用多维查询语言MDSQL

#### 5.3关系联机分析处理ROLAP

​		1.使用通用的关系数据库存储所需数据

​		2.适用于大量数据

​		3.低效率

##### 星型模型

​		是一种多维表结构，一般由两种不同性质的二维表组成：

​			事实表：存放多维表中的主要事实，称为度量值；

​			维表：存放多维表中的维成员的取值。

​		一般一个n维的多维表往往有n个维表和一个事实表，共同构成了星形结构。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/11.png)

##### 雪花模式

​		雪花模式是对星型模型的扩展，维表进一步层次化，原有的各维表可能被扩展为小的事实表，形成一些局部的“层次”区域。

​		优点：使维表尽可能地规范化，最大限度减少维表地数据存储量。

​		缺点：执行查询时需要更多链接操作，可能影响查询性能。

### 6.DATA CUBE 数据立方体

#### 6.1数据立方体

​		数据仓库的数据模式通常可以看成是定义在多个数据源上的数据视图，其中存储的分析型数据通常是一些经过统计而获得的综合性数据。但是时间开销往往过大。

​		物化视图：为了提高对统计信息的查询速度，我们可以预先计算好数据视图中的统计信息并保存在数据仓库中，这称为“物化视图”，即将虚的视图转变为实际的视图。存放物化视图的三维数据模型叫“数据立方体”。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/21.png)

​	如图所示，以占用较多空间为代价，读取/处理特定的数据变得十分方便。

#### 6.2数据超立方体

​		超过三维，意义不变，便称为了数据超立方体。类似于x，y，z坐标和时间四个维度。

#### 6.3方体格

​		1.n维方体称为基本方体

​		2.0维方体称为最高层次的抽象，称为顶点方体

​		3.方体格构成数据立方体

​		4.每一个顶点都是一个方体，对应了一种可能的表达形式

一个三维方体

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/24.png)

一个四维方体

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/25.png)

#### 6.4星形网查询模式

​	![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/26.png)

​		每一个维度里面，我们应当一并应用层次来进行查询。

​		每一个环我们称为一个足迹。

#### 6.5数据立方体的物化

​		有三种处理策略：不进行物化、全物化、部分物化

​		n维L层的立方体包含Πi=1->n（Li+1）种子方。

#### 6.6多维阵列聚合（压缩矩阵）

​		将数组分区成块（块是适合内存的小的子立方体）

​		压缩稀疏数组寻址

​		通过按以下顺序访问多维数据集单元以“多路”方式计算聚合，该顺序可以最大程度地减少访问每个单元的次数，并减少内存访问和存储成本。

​		对于如何压缩矩阵，我们会在后面的练习题中展示。

### 7.多维数据分析

​		多维分析是指对以多维形式组织起来的数据采取切片、切块、旋转、钻取等各种分析动作，以求剖析数据，使最终用户能从多个角度、多个侧面地观察数据，深入了解被包含在数据中的信息、内涵。

​		基本操作：切片、切块、旋转

​			切片：根据某一维上的某个维成员值选择统计数据进行分析

​			切块：根据某一维上的某个维成员取值的区间选择统计数据进行分析

​			旋转：调整维的排列次序的动作称为旋转

​		进阶操作：

​			上钻/数据概括（roll_up）：将多维下表的取值提升到较高的概念层次上，从而形成心得统计查询结果，并进行分析。

​			下钻/数据细化（drill_down）：将多维下标的取值降低到较低的概念层次上，从而形成更加细致的统计查询结果，并进行分析。

​			跨钻和钻透也是操作类型。

## 四、数据仓库设计

### 1.数据仓库设计的由来

​		在事务型数据处理上需要数据库设计，在分析型数据处理中则需要作数据仓库设计，二者在原理上是一致的，因此，数据库设计中的很多设计思想和方法可以在数据仓库中得到应用，但由于事务型与分析型对数据处理的不一致，两者在设计中的很多方面也存在着差别。

​		面向OLTP对数据库设计有明确的要求，但是数据仓库的需求只有在已装载部分数据并已开始使用时才能弄清楚，所以无法使用传统的需求驱动的方法进行。

### 2.操作型数据库与数据仓库的对比

​		面向的处理类型不同：面向应用/面向分析

​		面向的需求不同：确定的应用需求/不确定的分析需求

​		系统设计目标不同：事务处理性能/全局一致的数据环境

​		数据来源或系统的输入不同：事务相关数据/多种多样

​		系统设计的方法和步骤不同：SDLC（系统生命周期）/CLDS

#### SDLC/CLDS

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec4/1.png)

​		SDLC在最开始做需求分析，CDLS在理解需求的部分进行需求分析。

### 3.数据仓库设计的原则

​		面向主题、集成、非易失、时变的，这些特点决定了数据仓库的系统设计不能采用开发传统的OLTP数据库一样的设计方法，其设计过程必须遵循下述三条原则：

​		面向主题原则

​		数据驱动原则

​		原型法设计原则

#### 3.1面向主题原则

##### 建立数据仓库的目的

​		数据仓库的组织设计必须以用户决策的需要来确定，即从用户决策的主观需求（主题）开始。

##### 数据仓库中数据的组织方法

​		为了进行数据分析首先要有分析的主题，以主题为起点进行相关数据的设计，最终建立起一个面向主题的分析型环境。

​		在数据库设计中则是以客体为起始点，即以客观操作需求为设计依据。

##### 举例：“面向销售主题”

​		建立目的：管理人员能在适当的时候，订购适量的商品，并把它们分发到适当的商店中去销售，以提高商品的销售总金额。

​		需要执行的分析操作：分析什么样的商品，在什么样的时间和商店内畅销；管理人员将据此决定他们的经营策略。

#### 3.2数据驱动原则

##### 数据的来源

​		数据仓库是在现存数据库系统上进行开发的，因此，数据仓库中的数据必须是从已有的数据源中抽取而来，是已经存在的数据或对已经存在的数据进行加工处理而获得。

##### 数据驱动方法

​		从已经存在于操作型环境中的数据出发进行数据仓库的设计，这种设计方法被称为“数据驱动”方法。

#### 3.3原型法设计原则

##### 不断变化的分析需求

​		数据仓库系统的原始需求不明确，因此，采用原型法进行数据开发，即从构建系统的基本框架着手，不断丰富与完善整个系统。

##### 逐步求精的设计过程

​		数据仓库用户的需求是在设计过程中不断细化明确的。在数据仓库开发的整个过程中，要求决策人员和开发者共同参与、密切合作，不做或尽量少做无效工作与重复工作。

##### 启发方式

​		一个迭代的开发依赖于在上一个迭代所获得的结果，先载入一部分数据供DSS分析员使用和查看，然后根据用户的反馈，修改数据、添加数据。

##### 需求预测

​		启发方式和需求预测并列。实际情况通常介于启发和预测两者之间。

### 4.从操作型数据开始

#### 4.1需要解决的问题

​		现有的操作型系统的数据缺乏集成，建立已有的操作型应用时，没考虑过数据集成的问题。

​		从操作型环境到数据仓库有三种装载工作要做：装载档案数据、装载在操作型系统中目前已有的数据、将自数据库上次刷新以来在操作型环境中不断发生的变化从操作型环境中装载到数据仓库中。

#### 4.2过程/数据模型与设计环境

​		过程模型（仅仅适合于操作型环境），数据模型（既适合操作型环境，也适合分析型环境）。

​		数据模型能够进行稳定性分析和迭代开发。

#### 4.3数据仓库设计的三级数据模型

​		概念模型、逻辑模型、物理模型与高级模型、中级模型、低级模型相对应

​		高级模型对数据的抽象程度最大，以ER图的模式展现。

​		中级模型是数据项，是ER图的细分，大体上ER图每个实体对应一个dis。

​		低级模型是物理数据模型。

### 5.数据仓库的设计步骤

​		系统规划、概念设计、逻辑设计、物理设计、数据仓库生成、数据仓库的运行与维护

#### 5.1系统规划

##### 明确主题

​		在数据仓库设计的开始，首先要做的事是有关分析人员需要确定具体领域的分析对象，即主题。主题是较高层次的抽象，可以先确定初步主题概念再加以完善。

##### 技术准备

​		包括技术评估和技术环境准备。技术评估包括数据仓库的性能指标（数据存取能力、模型重组能力、数据装载能力）。技术环境准备包括计算机、网络结构、操作系统、数据库及数据仓库软件的选购要求等。

##### 数据仓库的设计/生成和运维

​		![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec4/11.png)

#### 5.2概念模型设计

##### 确定系统边界

​		要做的决策类型有哪些？

​		决策者感兴趣的是什么问题？

​		这些问题需要什么样的信息？

​		要得到这些信息需要包含哪些数据源？

##### 确定主要主题及其内容

​		明确数据仓库的分析对象，然后对每个主题的内容进行较为详细的描述。确定了主题之后，就可以用ER模型表示数据仓库的概念数据模型。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec4/12.png)

#### 5.3逻辑模型设计

##### 粒度划分

​		在设计过程中需要考虑数据仓库中数据粒度的划分原则，即数据单元的详细程度和级别。

​		一般将数据划分为：详细数据、轻度总结、高度总结三种粒度，或者采用更多级的粒度划分方法。

​		粒度的划分直接影响数据仓库中的数据量以及所适合的查询类型，粒度划分是否适当是影响数据仓库性能的一个重要方面。

##### 数据分割

​		是指把逻辑上统一整体的数据分割成较小的，可以独立管理的数据单元进行存储，以便于重构、重组和恢复，以提高创建索引和顺序扫描的效率。

​		通常采用时间属性作为数据分割的依据。

​		数据分割技术类似于数据库的数据分片技术。

##### 定义数据来源及抽取规则

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec4/15.png)

#### 5.4物理模型设计

​		在逻辑模型基础上确定数据的存储结构、确定索引策略、确定存储分配及数据存放位置等与物理有关的内容，物理模型设计的具体方法与数据库设计中的大致相似。常用方法：合并表、建立数据序列、引入冗余、表的物理分割、生成导出数据、建立广义索引。

##### 合并表

​		将表中的记录混合存放在一起，以降低表的连接操作的代价。

##### 数据序列

​		创建数据序列，如果数据存放在一行，一次IO就能检索到了。

##### 引入冗余

​		通过修改关系模式把某些属性复制到多个不同的主题表中去，从而减少一次分析过程所需要访问的表的数量。

##### 表的物理分割

​		相当于表的逻辑设计阶段的数据分割。

##### 生成导出数据

​		在原始、细节数据的基础上进行一些统计和计算，生成导出数据，并保存在数据仓库中。

##### 建立广义索引

​		记录数据仓库中与“最”有关的统计结果。

#### 5.5数据仓库生成

##### 建立数据模式

​		根据逻辑设计与物理设计的设计结果建立数据仓库的数据模式。

##### 编制数据抽取程序

​		根据数据仓库元数据中的定义信息，编制抽取程序。

##### 数据加载

​		将数据源中的数据，通过数据抽取程序加载到数据仓库的数据模式中去。

#### 5.6数据仓库的使用与维护

#### 5.7数据仓库的生命周期

## 五、Dimensional Modeling 多维建模

### 1.多维建模初步

#### 1.1维度建模中的基本概念

​		事实表、维度表、事实和维度的融合

##### 事实表

​		维度建模的核心和基本表

​		每一事实表都对应一个或若干个度量值

​				度量值是事实表的核心，也是趋势分析的对象

​				通过事实表来记录维度值与度量值之间的关系。

​		事实表中的一行对应一个度量值

​				事实表中的所有度量值必须具有相同的粒度

​				粒度划分模型：事务，周期快照，累计快照

##### 事实表中的度量值

​		最常用的度量值：数值类型

​		度量值通常是一个可以连续取值的变量，很少采用文本形式的度量值。

​		三种类型的度量值：可做加法运算、可沿着某些维度做加法运算，不能做加法运算。

##### 事实表中的关键字

​		每个事实表都有两个或两个以上的外关键字（Foreign Key）

​		通过外关键字建立事实表和维表之间的联系。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/1.png)

##### 维度表

​		维度表是事实表的入口，为用户提供了使用数据仓库的接口。

​		维度表中的维度属性通常用于定义事实表上的查询条件，也可作为定义报表和统计查询的列。

##### 维度表的属性组成

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/2.png)

##### 维度属性

​		通常是文本数据，或者是离散数据

​		尽量减少使用编码属性

###### 维度属性和度量值的区别

​		度量值属性：有许多取值可能并可以参与统计运算的属性

​		维度属性：离散的或取值可能不多的属性，取值不变或很少产生变化的属性。

##### 事实与维度的融合

​		将事实表及其相关的维表通过关键字进行连接。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/3.png)

### 2.案例1——零售营销

### 3.案例2——库存管理

### 4.案例3——订单管理

### 5.案例4——客户关系管理

[搬zhy的了，这个看懂即可](https://blog.csdn.net/qq_44202160/article/details/123040053)

## 六、Data Mining 数据挖掘

### 1.数据挖掘

​		在数据库及数据仓库中存贮有大量的数据，它们具有规范的结构形式与可靠的来源，且数量大，保存期间长，是一种极为宝贵的数据资源。充分开发、利用这些数据资源是目前计算机界的一项重要工作。

#### 1.1数据资源的利用有三种方式

​		数据资源的查询服务

​		数据资源的演绎（知识的利用与搜索、演绎数据库、统计分析软件、OLAP）

​		数据资源的归纳

#### 1.2数据的三种利用方式之间的区别

​		可以从文具盒中找到橡皮和铅笔，不可能得到橡皮要和铅笔配合使用的信息，这是数据资源查询和演绎的区别。

​		可以从一张家族谱中找到甲是乙的后代，但无法据此推断出丙的祖先是谁，这是演绎和归纳的区别。

​		数据挖掘可以寻找到那些具有普遍意义的知识，并可以将其应用到其它同类应用中，以帮助用户进行决策。

### 2.什么是数据挖掘

#### 2.1数据挖掘的作用

​		数据挖掘（Data Mining）又称为数据库中的知识发现，起源于80年代初，机器学习和数据分析的理论及实践是数据挖掘研究的基础，极大的商业应用前景是数据挖掘研究工作的巨大推动力。

​		传统的数据库查询和统计只能提供想要的信息，而数据挖掘技术则可以发现没有意识到的未知信息。

#### 2.2数据挖掘的定义

​		定义一：数据挖掘就是对数据库（数据仓库）中蕴涵的、未知的、非平凡的、有潜在应用价值的模式的提取。

​		定义二：数据挖掘就是从大型数据库的数据中提取人们感兴趣的知识。这些知识是隐含的、事先未知的潜在有用信息。

​		数据挖掘的三个因素：

​			数据挖掘的本源：大量、完整的数据

​			数据挖掘的结果：知识、规则

​			结果的隐含性：这就是需要数据挖掘的原因

### 3.数据挖掘中的几个基本概念

#### 3.1模式

​		用高级语言表示的表达一定逻辑含义的信息，这里通常指数据库中数据与数据之间的逻辑关系。例如：男性顾客在购买尿布的同时也购买啤酒；在购买面包和黄油的顾客中，大部分的人同时也买了牛奶。

#### 3.2知识

​		满足用户对客观评价标准（下面的兴趣度/置信度）和主观评价标准要求的**模式**

#### 3.3置信度

​		在某一数据集上，模式成立的程度。

​		例如，对于刚才的面包、黄油和牛奶的例子，就可以列出一个置信度：同时购买“面包、黄油、牛奶”的顾客人数占同时购买“面包、黄油”的顾客人数的百分比。

​		如果没有足够的置信度，模式便不能称为知识。

#### 3.4兴趣度

​		在某一数据集上，模式被用户关注的程度。

​		还是刚才的例子，这时的兴趣度为“同时购买面包黄油和牛奶的人数占顾客总人数的百分比”。

#### 3.5非平凡性

​		平凡知识：能够以确定的计算过程提取的模式称为平凡知识。

​		知识的发现过程具有某种不确定性和一定的自由度，便称为不平凡的知识。

#### 3.6有效性

​		知识发现了之后，必须要能够有效地在计算机上实现。有效性分为时间有效性和空间有效性。

### 4.数据仓库与数据挖掘

​		数据挖掘工作由传统的“建立在数据库基础上”变为了“可以在数据仓库上直接运行”。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/1.png)

#### 4.1利用数据库进行数据挖掘的缺点

​		动态数据：数据库的内容经常变化

​		噪声数据：数据库中的错误数据和异常现象

​		不确定性：发现的模式可能只在一部分数据上有效

​		冗余信息：同一数据的多次出现会误导知识的发现过程，例如在糖水里加糖，会增大糖的置信度，降低水的置信度。（只是比喻）

​		不完整数据：由于不完整的数据域和数据域上的值的缺少造成的不完整数据当然会影响发现的结果。

​		稀疏数据：影响发现效率。

### 5.数据挖掘的步骤

​		数据挖掘技术在决策支持过程中的地位

​		![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/2.png)

​		数据挖掘一般可以由下面五个步骤组成：

​			数据集成、数据归约、挖掘、评价、表示

#### 5.1数据集成

​		数据集成包括：

​			从各类系统中提取挖掘所需的统一数据模型

​			其次，完成数据加载

​		在数据仓库数据的加载过程中，需要对数据作以下的预处理：

​			数据清理：填补丢失的数据、清除噪声数据、修正数据的不一致性

​			数据集成

​			数据转换：收集到的数据并不一定适合数据挖掘的需要。如果已有的挖掘方法无法处理这些数据，存在一些不规则的数据，或者数据本身不够充分等，因此需要对收集到的数据进行转换。

#### 5.2数据归约

​		用于数据挖掘的数据量是非常巨大的，通过数据归约技术可以减低数据量，提高数据挖掘的操作的性能。

​		常见的归约技术有：数据立方体计算、挖掘范围的选择、数据压缩、离散化处理

​		挖掘范围的选择：选取与挖掘操作有关的属性集

​		数据压缩：减低数据的规模，采用的数据挖掘算法不需要解压就可以直接利用那些压缩数据进行数据挖掘，那么数据压缩技术将是非常有用的。

​		离散化处理：如果一个属性的值域是一个连续区域，可以将它划分为若干个区域，然后用每个区域的标识代替原来的值。用以减低该属性上属性值的个数。

#### 5.3挖掘

​		要求选择相应的方法与相应的挖掘参数，在挖掘结束后即可得到相应的预测。

#### 5.4评价

​		根据标准做出评价

#### 5.5表示

​		数据挖掘结果的规则在计算机中用一定形式表示出来，它可以包括文字、图形、表格、图表等可视化形式，也可同时用内部结构形式存储于知识库中以供日后分析之用。

### 6.常用的数据挖掘方法

​		常用的数据挖掘方法包括：特征规则挖掘，关联规则挖掘，序列模式分析，分类分析，聚类分析。

#### 6.1特征规则挖掘

​		是一种常见的知识形式，描述数据对象的普遍特征。有两类：面向属性归约方法，数据立方方法。

##### 6.1.1面向属性归约方法

​		通过对属性值间概念的层次结构进行归约，以获得相关数据的概括性知识，通常又称为普化知识

​		概念层次树：这些概念依抽象程度的不同可构成描述它们层次结构的概念层次树。

###### 概念层次树

​		指某属性值所具有的从具体的概念值到概念类的层次关系树

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/3.png)

###### 归约（规约）

​		用概念层次上高层的属性值去替代低层的属性值，又称为概念提升。如用“江苏”代替“南京。”

###### 基本关系表

​		待挖掘的原始细节数据，以关系的形式出现，通常来自于准备好的数据库或数据仓库中。

###### 概括关系表

​		概括关系表通过基本关系表规约而来，其属性包括：

​			目标数据集中参与数据挖掘的一个/多个属性。

​			系统为每个概括关系表增加的COUNT属性。

​		基本关系表的元组称为“基本元组”，概括关系表的元组称为“宏元组”。一个宏元组概括了多个基本元组。

​		概括关系相当于进行预处理，能够规范化属性的取值；提高数据挖掘性能；便于在不同层次进行数据挖掘。

##### 6.1.2面向属性归约方法举例

1. 数据挖掘的目的：寻找借阅《大趋势》一书的学生有什么特征？（就读专业的特色）

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/6.png)

2. 构造"系统"属性的概念层次树

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/7.png)

3. 依据上述的概念层次树对基本关系表进行规约
   1. 在概括关系表中只保留三个属性：系别，书名，count
   2. 在不同的概念层次上，经过规约可以得到不同的概括关系表

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/8.png)

4. 数据挖掘前的预处理
   1. 在开始特征规则挖掘之前，需要从概括关系表中剔除那些出现频率过低的噪声数据（宏元组）。以减少数据挖掘所处理的宏元组的数量，提高挖掘的效率；同时也避免得到过多的兴趣度不满足要求的挖掘结果
   2. 通常我们会定义一个噪声数据的阈值M
      1. M通常指概括关系表中的count属性的值
      2. 如果某个宏元组在count属性上的取值小于或等于M，则该宏元组将被看作为噪声数据，不参与后续的数据挖掘过程
         1. 虽然噪声数据不参与挖掘过程，但并不能就此从概括关系表中删除噪声数据
         2. 在计算规则的兴趣度（支持度）时需要包括这些噪声数据
5. 基于基本关系表的特征规则挖掘（M = 1）
   1. 以“灰色”为底色的宏元组为噪声数据

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/9.png)

6. 所发现的特征规则是：借阅《大趋势》一书的是“经济系”的学生
7. 基于概括关系表（1）的特征规则挖掘（M = 1）
   1. 以“灰色”为底色的宏元组为噪声数据

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/10.png)
![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec6/12.png)

8. “数据规约”与“挖掘结果”之间的关系
   1. 在采用面向属性规约方法进行数据挖掘时，如果规约的概念层次过低或过高，可能会减少挖掘所发现的规则
      1. 过低：大量的宏元组会成为噪声数据，被剔除在规则的挖掘之外
      2. 过高：会减少概括关系表中宏元组的数量，从而减少挖掘结果中的规则数
   2. 因此，在开始挖掘之前需要选择一个合适的规约层次。同时挖掘所获得的结果规则的多少也与用户定义的噪声数据的阈值M有关

##### 6.1.3数据立方方法

​		在面向属性规约方法中，经常要做各种统计查询。如果预先做好某些经常需要用到但花费较高的统计、求和等集成计算，并将统计结果存放在多维数据库中，就可以节省数据归约时间，提升数据挖掘效率。

​		常用的方法有：数据概括（将属性值提升到较高的概念层次），数据细化（将属性值层次降低）。

##### 6.1.4特征规则挖掘和OLAP的区别

​		特征规则挖掘是参数主导的自动化过程，OLAP是分析人员主导的人工过程。

#### 6.2关联规则挖掘

##### 关联规则

​		用于表示事务数据库中诸多属性之间的关联程度。关联规则挖掘利用数据库中的大量数据通过关联算法寻找属性间的相关性。

##### 如何发现关联规则

​		如果不考虑关联规则的兴趣度和置信度，任意组合均构成关联规则。为了发现有意义的关联规则，需要给定两个阈值：最小兴趣度和最小置信度。

#### 6.3序列模式分析

​		与关联规则挖掘类似，但序列模式分析法的侧重地是为了找出数据对象之间的前因后果关系。

#### 6.4分类分析

​		数据分类是数据挖掘的主要内容之一，通过分析训练数据样本，产生关于类别的精确描述。这种类别通常由分类规则组成，可以用来对未来的数据进行分类和预测。

​		数据分类是一个两个步骤的过程：

​			第一步：建立一个模型，描述给定的数据类集或概念集。通过分析由属性描述的数据库元组来构造模型。

​			第二步：使用模型对数据进行分类。包括评估模型的分类准确性以及对类标号未知的元组按模型进行分类。

​		分类分析法是一种特征归纳方法，目前的分析算法大多基于：决策树方法、贝叶斯方法、人工神经网络方法、约略集方法、遗传算法。

#### 6.5聚类分析

​		聚类分析又称集群分析，是研究分类问题的一种多元统计方法。聚类分析分为距离聚类和相似系数聚类。

​		聚类分析与分类分析相反：

​			首先输入一组没有标记的记录，系统按照一定的规则合理地划分记录集合。

​			然后可以采用分类分析法进行数据分析，并根据分析的结果重新对原来的记录集合进行划分，循环往复直到获得满意的分析结果。

​		主要的聚类方法有：划分方法，层次的方法，基于密度的方法，基于网格的方法、基于模型的方法。

### 7.数据挖掘的应用

​		略。

# （二）考试题考什么

1. 作业占比比较大
2. 题型：多选+简答+问答
   1. 多选：不是单选(至少有2个答案，漏选的一半)，应该没有全选
   2. 简答：相对比较简单，都是概念题，比如定义(PPT上可能有2-3个，任何一个都可以接受)，意思到即可
   3. 问答：
      1. 画一个例子来解释多维模型：概念有层、多维度，在这基础上如何完成OLAP操作，包括切块、切片、旋转、上钻和下钻。
      2. Overview中包含数据挖掘，数据挖掘PPT可以复习一下
         1. 数据挖掘定义和怎么做
         2. 数据挖掘数据资源利用的三种方式
         3. 数据仓库中的知识发现定义
         4. 数据挖掘中的基本概念看一下不用记住
         5. 数据挖掘的特点：什么是数据挖掘，什么不是数据挖掘
         6. 数据挖掘和数据仓库关系了解
         7. 常用的数据挖掘方法
            1. 特征规则挖掘用来解决什么问题
            2. 特征概念描述：特征与区分(你是什么：特征，你不是什么：区分)
            3. 关联规则挖掘：怎么做不重要
            4. 分类分析：分类解决的问题，和聚类的区别
            5. 聚类分析：聚类解决的问题
            6. 不考定义，比如以下哪些事情算数据挖掘，计算本身均值，有一定区分性，对未知数据的预测，给个例子，比如银行用分类聚类能解决什么问题

# （三）考试题有什么

- [1. 简答题](#1-简答题)
  - [1.1. 什么是数据仓库？其四大特色？](#11-什么是数据仓库其四大特色)
  - [1.2. 为什么在传统的以数据库为核心的事务处理环境中不适宜建立DSS等分析型应用？](#12-为什么在传统的以数据库为核心的事务处理环境中不适宜建立dss等分析型应用)
  - [1.3. 什么是数据仓库中的粒度？为何要在数据仓库中采用多重粒度？试举例说明](#13-什么是数据仓库中的粒度为何要在数据仓库中采用多重粒度试举例说明)
  - [1.4. 数据仓库的物理模型设计优化技术有哪些？对这些技术进行简要的说明](#14-数据仓库的物理模型设计优化技术有哪些对这些技术进行简要的说明)
  - [1.5. 数据仓库中的历史完整性/一致性？为保持历史完整性/一致性，采用哪些方式？试举例说明](#15-数据仓库中的历史完整性一致性为保持历史完整性一致性采用哪些方式试举例说明)
  - [1.6. 简述数据仓库刷新的方法，并对每一种方法进行简单的说明](#16-简述数据仓库刷新的方法并对每一种方法进行简单的说明)
  - [1.7. 数据仓库中ETL技术是什么？在数据仓库架构中ETL完成什么任务？](#17-数据仓库中etl技术是什么在数据仓库架构中etl完成什么任务)
  - [1.8. 为什么在数据仓库体系中还需要建立数据集市？在企业中建立数据仓库和数据集市体系的方法主要有哪四种？请分别描述这些方法，并总结其优点和缺点。](#18-为什么在数据仓库体系中还需要建立数据集市在企业中建立数据仓库和数据集市体系的方法主要有哪四种请分别描述这些方法并总结其优点和缺点)
  - [1.9. 数据仓库应用中数据挖掘在什么地位？和其他方式有什么差异？](#19-数据仓库应用中数据挖掘在什么地位和其他方式有什么差异)
  - [1.10. 各种数据挖掘方法用来解决什么问题？](#110-各种数据挖掘方法用来解决什么问题)
  - [1.11. 星型模型和雪花模型各自有什么优缺点](#111-星型模型和雪花模型各自有什么优缺点)
- [2. 简答题](#2-简答题)
  - [2.1. 请给出一个具体的数据立方体模型的例子(绘图说明)](#21-请给出一个具体的数据立方体模型的例子绘图说明)
  - [2.2. 以该数据立方体为例介绍OLAP中的维和层的概念](#22-以该数据立方体为例介绍olap中的维和层的概念)
  - [2.3. 以该数据立方体中的某一维，举例说明什么是切片(slice)、切块(dice)、数据概括(roll-up) 和数据细化(drill-down) 操作。](#23-以该数据立方体中的某一维举例说明什么是切片slice切块dice数据概括roll-up-和数据细化drill-down-操作)
  - [2.4. 商务智能各个部件的概念](#24-商务智能各个部件的概念)
- [3. 其他知识点补充](#3-其他知识点补充)
  - [3.1. 数据、信息与知识](#31-数据信息与知识)
  - [3.2. 为什么需要商务智能？](#32-为什么需要商务智能)
  - [3.3. 商务智能是什么？目标是什么？](#33-商务智能是什么目标是什么)
  - [3.4. 数据挖掘](#34-数据挖掘)
  - [3.5. 商务智能的发展方向](#35-商务智能的发展方向)
  - [3.6. 操作型数据和分析型数据](#36-操作型数据和分析型数据)
  - [3.7. 信息系统发展](#37-信息系统发展)
  - [3.8. 为什么建立数据仓库](#38-为什么建立数据仓库)
  - [3.9. ETL工具分类](#39-etl工具分类)
  - [3.10. 数据仓库的数据组织形式](#310-数据仓库的数据组织形式)
  - [3.11. 元数据](#311-元数据)
  - [3.12. OLAP&OLTP](#312-olapoltp)
  - [3.13. Codd对OLAP的评价原则](#313-codd对olap的评价原则)
  - [3.14. MOLAP&ROLAP](#314-molaprolap)
  - [3.15. ROLAP优化手段](#315-rolap优化手段)
  - [3.16. 物化视图](#316-物化视图)
  - [3.17. 生命周期](#317-生命周期)
  - [3.18. 数据仓库的设计原则(展开)](#318-数据仓库的设计原则展开)
  - [3.19. 数据仓库设计的三级数据模型](#319-数据仓库设计的三级数据模型)
  - [3.20. 数据仓库的设计步骤](#320-数据仓库的设计步骤)
  - [3.21. 维度建模的设计过程](#321-维度建模的设计过程)
  - [3.22. OLAP](#322-olap)
  - [3.23. 数据仓库的生命周期](#323-数据仓库的生命周期)
  - [3.24. 粒度划分模型：事务，周期快照，累积快照](#324-粒度划分模型事务周期快照累积快照)
  - [3.25. 例子一：零售营销](#325-例子一零售营销)
  - [3.26. 例子二：库存管理](#326-例子二库存管理)
  - [3.27. 例子三：订单管理](#327-例子三订单管理)
  - [3.28. 例子四：客户关系管理](#328-例子四客户关系管理)
  - [3.29. 数据资源利用的方式](#329-数据资源利用的方式)
- [4. 选择题](#4-选择题)

## 1. 简答题

### 1.1. 什么是数据仓库？其四大特色？

1. 数据仓库就是一个**面向主题的、集成的、非易失(稳定的)、随时间不断变化**的数据集合，用于支持经营管理过程中决策制定。
2. 数据仓库四大特色：
   1. 面向主题：指数据仓库内的信息是按主题进行组织的，为按主题进行决策的过程提供信息。(数据仓库中无法做到面向应用：没有办法模拟出所有的决策)
   2. 集成：数据仓库中的数据是为**分析**服务的，而分析需要多种广泛的**不同数据源**以便进行比较、鉴别，因此数据仓库中的数据必须从**多个数据源**中获取，这些数据源包括多种类型数据库、文件系统以及Internet网上数据等，它们通过数据集成而形成数据仓库中的数据
   3. 非易失(稳定)：数据仓库中的数据是经过抽取而形成的**分析型数据**，不具有原始性，**主要供企业决策分析之用**，执行的主要是"查询"操作，一般情况下不执行"更新"操作。同时，一个稳定的数据环境也有利于数据分析操作和决策的制订
   4. 随时间不断变化：企业不仅仅关心某一个时间节点的情况。数据仓库的数据通常带有时间属性，同时必须以一定时间段为单位进行统一更新。

### 1.2. 为什么在传统的以数据库为核心的事务处理环境中不适宜建立DSS等分析型应用？

1. 事务处理和分析处理的性能特性不同
   1. 用户每次操作处理的时间短，存取数据量小，但操作频率高，并发程度大。
   2. 每次分析可能需要连续运行很长的时间，存取数据量大，但很少做这样的分析处理，也没有并发执⾏的要求。
   3. 资源抢占
2. 数据集成问题：
   1. 事务处理一般只需要与本部门业务有关的当前细节数据，而对整个企业范围内的集成应用考虑很少，可能来自多种不同的数据源
   2. DSS需要集成的数据，包括整个企业内部各部门的相关数据，以及**企业外部、竞争对手**等处的相关数据(这部分也应该是集成数据的一部分)
   3. 对于需要集成数据的DSS应用来说，在应用程序中对事务处理环境中的这些纷繁复杂的数据进行集成，将带来下述问题: **大大加重程序员的负担、重复计算导致极低的分析处理效果**。
3. 数据的动态集成问题：集成数据必须以一定的周期进行刷新(采用动态集成策略)，但**传统的事务处理环境并不具备动态集成的能力**。
4. 历史数据问题：事务处理一般只需要**当前数据**，分析处理更看重**历史数据**。
5. 数据的综合问题：
   1. 事务处理需要的是当前的**细节性**操作数据，而分析处理需要的往往是大量的**总结性**分析型数据，而非数据库中的细节型数据。
   2. 在分析前往往需要读细节数据进行**不同程度的综合**，传统的事务处理系统不具备这种**综合能力**。
6. 数据的访问问题：
   1. 事务处理对于需要修改的数据必须实时"**更新**"数据库
   2. 分析处理**不需要实时的"更新"操作，但需要定时"刷新"**

### 1.3. 什么是数据仓库中的粒度？为何要在数据仓库中采用多重粒度？试举例说明

1. 定义：粒度是对数据仓库中的数据的综合程度的一个度量。既影响数据仓库中数据量的多少，也影响数据仓库能够回答询问的种类

| 粒度小 | 细节程度高 | 综合程度低 | 回答查询种类多 | 查询效率低 |
| ------ | ---------- | ---------- | -------------- | ---------- |
| 粒度大 | 细节程度低 | 综合程度高 | 回答查询种类少 | 查询效率高 |

1. 数据仓库中采用多重粒度：数据分开、满足不同查询、分析需求不同粒度互补

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/13.png)  ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/14.png) |

1. 对于上面的左图，如果这样子设计的话，高粒度，低细节的数据无法应对过于细节的问题，
2. 对于上面的右图，如果这样子设计的话，无论是高粒度还会低粒度的数据都可以应对。
3. 应对不同级别的粒度要求
   1. 大粒度数据，使用快速存储设备，支持大量数据访问以提高性能。
   2. 小粒度数据：使用低速存储设备，使用频率不会太高，满足细节查询。
4. 例子(或见图)
   1. 库存周期快照：定期生成每种商品的库存水平
   2. 库存事务：记录库存水平的主要因素
   3. 库存累积快照：记录每件商品的分发历史，直到离开仓库为止。

### 1.4. 数据仓库的物理模型设计优化技术有哪些？对这些技术进行简要的说明

1. 合并表：在常见的一些分析处理操作中，可能需要执行**多表连接**操作。为了节省I/O开销，**可以把这些表中的记录混合存放在一起**，以**减低表的连接操作的代价**
2. 建立数据序列：根据**周期运行的数据分析应用访问数据**的**先后顺序**，维护一个冗余的序列，提前把需要的数据按需准备好，在需要访问的时候就不再需要访问不同的表格中的不同元组，从而提升效率。
3. 引入冗余：在面向某个主题的分析过程中，通常需要访问不同表中的多个属性，而每个属性又可能参与多个不同主题的分析过程。因此可以通过修改关系模式把某些属性**复制**到多个不同的主题表中去，从而**减少一次分析过程需要访问的表的数量**。
4. 表的物理分割：根据表中每个属性数据的访问频率和稳定性程度对表的存储结构进行分割
   1. 对于访问频率较高的属性，可以单独考虑其物理存储组织，以便选择合适的索引策略和特定的物理组织方式。
   2. 对于需要频繁更新的属性，也可以单独组织其物理存储，以免因数据更新而带来的空间重组、重构等工作。
5. 生成导出数据：在原始、细节数据的基础上进行一些统计和计算，生成导出数据，并保存在数据仓库中。
   1. 优点：
      1. 避免在分析过程中执行过多的**统计或计算**操作，减少输入/出的次数，提高分析操作的性能
      2. 避免了不同用户进行重复统计操作可能产生的**偏差**
6. 建立广义索引：**建立用于记录数据仓库中数据与"最"有关的统计结果的索引**。
   1. 这样的广义索引的数据量是非常小的，可以在每次进行数据仓库数据加载工作时生成或刷新这样的广义索引。用户可以从已经建立的广义索引里直接获取这些统计信息，而不必对整个数据仓库进行扫描。

### 1.5. 数据仓库中的历史完整性/一致性？为保持历史完整性/一致性，采用哪些方式？试举例说明

1. **历史完整性**：部分维度属性是会随时间而发生变化的，若只是将这些变化的维度属性值作简单的修正，即在维度表中只保留该维度属性的当前值，这会直接影响到对事实表中该维度属性所对应的事实数据元组的访问，特别是无法根据维度属性值的变化情况来进行分析处理。历史完整性是保证维度中的历史数据在改变之后不丢失。
2. 方法:针对**渐变维度**(商品表)
   1. **改写属性值**:容易实现，但不能对旧属性值的任何历史数据进行维护(无法保证历史一致性)
   2. **添加维度行**:准确跟踪渐变属性的主要方法，也是跟踪历史变化的最常用的方式;引入新的行用来反映新的属性值;增加了维度行的膨胀;可以引入生效或截止日期
   3. **添加维度列**:使用维度列保存旧的属性值;不适合跟踪维度属性大量变化
3. 方法：针对**快变维度**
   1. **微型维度**
      1. 将分析频率高或变化频率大的属性拆成为**独立的微型维度**，裂解后我们使用FK来连接上下文，如果选择类型2或类型6来处理，都需要来复制某些元组，而微型维度使得我们需要复制存储的元组大小变小。
      2. 例如：客户维度中的年龄，性别，收入水平等属性，它们的每一种取值组合构成微型维度表中的一行
   2. **预设波段**
      1. 对于诸如收入与购买总额等不断变化的属性，应该被转换成呈**波段分布**的范围，即进行离散化处理，使其只能在**数目相当小的离散值**中取值，以减少维度表中的数据量
      2. 将里面的值变化为区间，使用**区间标签来作为实际的值**

### 1.6. 简述数据仓库刷新的方法，并对每一种方法进行简单的说明

1. 时间戳：
   1. 若数据库中的记录有**时间属性**，则可根据OLTP数据库中的数据有无更新，以及在执行更新操作时数据的修改时间标志来实现数据仓库中数据的动态刷新。
   2. 缺点:大多数数据库系统中的数据并不含有时间属性。
2. DELTA文件
   1. 有些OLTP数据库的应用程序在工作过程中会形成一些DELTA文件以记录该应用所作的数据修改操作，可根据该DELTA文件进行数据刷新。一般是**底层数据库不太稳定**，我们会使用。
   2. 优点:采用此方法可避免对整个数据库的对比扫描，具有较高的刷新效率。
   3. 缺点:这样的应用程序并不普遍，修改现有的应用程序的工作量又太大。
3. 建立映象文件
   1. 在**上一次数据刷新后**对数据库作一次快照
   2. 在**本次刷新之前**再对数据库作一次快照
   3. 比较两个快照的不同，从而确定数据仓库的数据刷新操作。
   4. 优点:对于数据库和操作型应用没有特别要求
   5. 缺点:需要占用大量的系统资源，可能较大地影响原有数据库系统的性能
4. 日志文件
   1. 一般OLTP数据库都有日志文件，可根据OLTP数据库的日志信息来实现数据仓库的数据刷新。
   2. 优点:日志是OLTP数据库的固有机制，**不会影响原有OLTP数据库的性能**,具有比DELTA文件和建立映象文件**更高的刷新效率**
   3. 缺点:无法应用于无日志文件机制的遗留数据库系统

### 1.7. 数据仓库中ETL技术是什么？在数据仓库架构中ETL完成什么任务？

1. ETL：数据抽取、数据转换和数据装载
2. ETL任务
   1. 数据抽取:数据仓库中的数据来源于数据源，将数据源中数据通过网络进行抽取，并经加工、转换、综合后形成数据仓库中的数据，这就是数据仓库的数据抽取。
   2. 数据转换:数据元素的重命名、格式化，数据编码的转换(解析、校正、标准化、增补)
   3. 数据刷新：
      1. 经过抽取进入数据仓库的数据，在经过一段时间后要重新修正，修改那些过时的数据，保存那些不变的数据，此种动作称为数据仓库的数据刷新。
      2. 数据刷新的过程与抽取类似，但刷新的数据量往往小于抽取的数据量。由于仅需要对修改过的数据进行刷新，因而其实现难度与复杂性要大于数据抽取。
   4. 数据装载:数据经过转换、清洗后，需要装载到目标数据库中。数据装载的方式有多种:全表对比方式、时间戳方式、日志表的方式、全表删除后再插入的方式。

### 1.8. 为什么在数据仓库体系中还需要建立数据集市？在企业中建立数据仓库和数据集市体系的方法主要有哪四种？请分别描述这些方法，并总结其优点和缺点。

1. 描述：数据仓库与数据集市的关系类似于传统关系数据库系统中的基表与视图的关系。数据集市的数据来自数据仓库，它是数据仓库中数据的一个部分与局部，是一个数据的再抽取与组织的过程。
2. 真实原因：全局性数据仓库往往太大，在实际应用中将它们按部门或个人分别建立反映各个子主题与区域的局部性数据组织，它们即是数据集市。因此，有时我们也称它为部门数据仓库；不同的主题会应用到的数据不同，对**数据的时效性**等部分要求不同。

| 自顶向下的数据集市                                           | 自底向上的数据集市                                           |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/exam/1.png) | ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/exam/2.png) |
| 总线结构的数据集市                                           | 企业级数据集市                                               |
| ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/exam/3.png) | ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/exam/4.png) |


1. 数据仓库与数据集市关系
   1. 自顶向下结构
      1. 构建企业数据仓库：公共中央数据模型；数据再加工；减少冗余和不一致性；搜集历史的、细节的、全局的数据
      2. 基于企业数据仓库构建数据集市:选定企业模型下的部门主题;聚集数据;建立集市数据对企业数据仓库的依赖关系
      3. 优点
         1. 建立数据集市能够减轻DW访问负载
         2. 各部门可以任意处理数据
         3. 数据转换和整合在DW阶段统一完成
         4. 数据缓冲功能
      4. 缺点:成本高、见效慢、数据集市间不共享资源
   2. 自底向上结构
      1. 构建数据集市：划定主题区域；快速实施本地自治；易于复制；数据再加工；允许一定的冗余和不一致
      2. 基于数据集市构建企业数据仓库:确定各数据集市的可用性;模型的合并，消除不同数据集市之间的数据不一致性
      3. 优点:见效快、启动资金少
      4. 缺点
         1. 各个部门都要进行数据清理整合
         2. 可能造成"蜘蛛网"、数据不一致等问题
         3. 并且总体_上没有节约资金
   3. 总线结构的数据集市
      1. 不建立数据仓库而直接建立数据集市
      2. 各个数据集市不是孤立的，相互之间通过一种共享维表和事实表的"总线结构"紧密联系在一起。
      3. 优点:共享维表和事实表，解决了建立数据集市的许多问题
      4. 缺点
         1. 这种结构基于多维模型，应用限制于OLAP
         2. 多个数据源直接影响多个集市造成结构不十分稳定
   4. 企业级数据集市
      1. 在没有数据仓库的前提下用总线结构构建数据集市
      2. 数据集市遵循总线结构进行独立开发部署
      3. ETL过程不存在数据结构问题

### 1.9. 数据仓库应用中数据挖掘在什么地位？和其他方式有什么差异？

1. 在传统的决策支持系统中，数据挖掘技术是建立在数据库的基础上的，数据挖掘只是其中的一个部分，在这之前需要大量的数据查询和预处理
2. 有了数据仓库技术之后，由于数据仓库中的数据都是经过抽取、整理和预处理后的综合数据，因而数据挖掘工作可以在数据仓库上直接运行
3. 差异:
   1. 在数据挖掘过程中，规则的发现基于统计规律
   2. 在数据挖掘中，知识的发现过程都应具有某种不确定性和一定的自由度，也就是要发现不平凡的知识( 能够以确定的计算过程提取的模式称为平凡知识)

### 1.10. 各种数据挖掘方法用来解决什么问题？

1. 特征规则挖掘:用于描述一类数据对象的普遍特征，是普化知识的一种，包括面向属性归约方法和数据立方方法
   1. 面向属性归约:属性值间概念的层次结构进行归约，以获得相关数据的概括性知识，通常又称为普化知识
      1. 概念层次树
      2. 概括关系表:在不同概念层次上进行数据挖掘，完全可能获得不同的挖掘结果
      3. 在开始特征规则挖掘之前，需要从概括关系表中剔除那些出现频率过低的噪声数据(宏元组)。以减少数据挖掘所处理的宏元组的数量，提高挖掘的效率;同时也避免得到过多的兴趣度不满足要求的挖掘结果
   2. 数据立方方法:预先做好某些经常需要用到但花费较高的统计、求和等集成计算，并将统计结果存放在多维数据库中。在构造概括关系表时，就可以直接从多维数据库中获得所需要的统计结果，从而节省数据规约的时间，提高数据挖掘的效率。
2. 关联规则挖掘:关联规则用于表示事务数据库中诸多属性之间的关联程度。而关联规则挖掘则是利用数据库中的大量数据通过关联算法寻找属性间的相关性
   1. Apriori算法:关联规则的挖掘过程也就是在数据库中寻找频繁项集的过程
3. 序列模式分析:找出数据对象之间的联系，侧重点是为了找出数据对象之间的前因后果关系：如:下雨---洪涝;电筒---电池
4. 分类分析:主要是通过分析训练数据样本，产生关于类别的精确描述。这种类别通常由分类规则组成，可以用来对未来的数据进行分类和预测
   1. 如:
      1. 信用卡公司对持卡人的信誉度标记按:优、良、一般，及差四档分类。这样，持卡人就被分成为四种类型，然后利用分类分析找出每一类持卡人的特征与规律
      2. 电话计费系统可以根据在不同时间段内电话的使用频率来调整计费单价
   2. 决策树方法:决策树表示了一一个关心电子产品的用户是否会购买PC(buys_ computer) 的知识，用它可以预测某条记录(某个人)的购买意向
5. 贝叶斯方法
6. 人工神经网络方法
7. 约略集方法
8. 遗传算法
9. 聚类分析:研究分类问题的一种多元统计方法距离聚类和相似系数聚类
   1. 输入的是一组没有被标记的记录，系统按照一 定的规则合理地划分记录集合
   2. 划分方法:学生划分
   3. 层次的方法
      1. 基于密度的方法
      2. 基于网格的方法
      3. 基于模型的方法
10. 应用:
    1. 金融业:
       1. 对帐户进行信用等级评估一聚类分析
       2. 股票交易规律分析
       3. 信用卡使用模式分析
       4. 金融市场的分析和预测
    2. 保险业:
       1. 保险费率的确定:从大量客户投保数据中分析并取得不同条件、不同人员、不同险种、不同时间与年龄的保险费率，使保险业主能获得合理的利润
       2. 险种关联分析:分析客户在购买了某种保险后是否同时还会购买另-一种保险一关联规则挖掘
       3. 用户群体预测:预测投保人员特征一特征规则挖掘
       4. 认购险种的预测:通过数据挖掘预测新险种的客户群以及新险种的前景
    3. 零售业:
       1. 可以分析顾客行为与习惯
       2. 可以分析商场销售商品的构成
       3. 数据挖掘还可用于商品销售预测、商品价格分析以及零售点设置布局等方面

### 1.11. 星型模型和雪花模型各自有什么优缺点

1. 星型模型：星型模型是一种多维表结构，它一般由两种不同性质的二维表组成。
   1. 事实表：存放多维表中的主要事实，我们称为量(Measure)
   2. 维表：用以存放多维表中的维成员的取值
   3. 一般一个n维的多维表往往有n个维表和一个事实表，它们构成一个星形结构，因此称为星型模型。在星型模式中主体是事实表，而有关维的细节则构作于维表内以达到简化事实表的目的，事实表与维表间有公共属性相连以使它们构成一个整体。
2. 雪花模型：
   1. 雪花模型是对星型模型的扩展：雪花模型对星型模型的维表进一步层次化，原来的各维表可能被扩展为小的事实表，形成一些局部"层次"区域。
   2. 优点：最大限度地减少数据存储量，使维表尽可能地规范化。
   3. 缺点：执行查询需要更多的连接操作，可能会影响查询的性能。

### 1.12. 请给出一个具体的数据立方体模型的例子(绘图说明)

1. 产品P(product)、商店S(store)及日期D(Date)


| ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/17.png) | ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/18.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/19.png) | ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/20.png) |

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/exam/6.png)

### 1.13. 以该数据立方体为例介绍OLAP中的维和层的概念

1. 维(Dimension):观察度量值的角度
   1. 例如:可以从三个"维"角度观察"销售金额"这个对象
      1. 时间维:可从时间角度统计(所有)商品在不同时间段内的销售(总)金额，以便于分析其与时间之间的关系
      2. 商品维:根据商品的分类情况统计每一类商品的销售金额，以便于分析其与商品类型之间的关系
      3. 地域维:可根据每个连锁店所在的地域统计其销售(总)金额，以便于分析其与地域之间的关系
2. 层(Layer):在分析型应用中，对分析对象可以在不同的深度层面上进行分析与观察，并可能得到不同的分析结果。因此，"层"反映了对分析对象的**观察深度**。(可以使维度的取值有不同的度量)
   1. 按如下的方法进行层次划分
      1. 按商品的价格分为:高档，中档，低档
      2. 按商品的供应商分为:外资，合资，国营，私营，个体
      3. 按购买商品的顾客信息
      4. 按照年龄层次来划分:老年，中年，青年，少年儿童，婴儿
      5. 按照所从事的职业来划分.....
3. 以下为补充
4. 维成员：维的一个取值称为该维的一个"维成员"
   1. 如果一个维是多层次的，则该维的"维成员"可以是
      1. 在不同维层次上的取值的组合，例如:对具有日，月，年三个层次的"时间维"来说，"某年某月某日"、"某年某月"、"某月某日"、"某年"都是其维成员，如: 1998年，1月，1998年1月，1998年1月1日，1月1日
      2. 在某个维层次，上的取值
         1. 例如:"地域"维中的"江苏"，"南京"，....
         2. 例如:"商品"维中的"电视机"， "服装"，....
   2. 对一个数据项(分析"对象")来说，维成员是该数据项在某维中位置的描述。
5. 数据单元(单元格)
   1. 当多维数组的每一维都选中一个维成员，这些维成员的组合就唯一确定了一个观察对象的值，即(维成员1，维成员2，...维成员n， 对象值)
   2. 这样一个值或存 放该值的地方我们称其为一个"数据单元"

### 1.14. 以该数据立方体中的某一维，举例说明什么是切片(slice)、切块(dice)、数据概括(roll-up) 和数据细化(drill-down) 操作。

1. 切片(slice):根据某一维上的某个维成员值选择统计数据进行分析
2. 切块(dice):
   1. 根据某一维上的某个维成员取值的区间选择统计数据进行分析
   2. 根据多个维度上的维成员取值的区间选择统计数据进行分析
3. 数据概括(roll-up):将多维下标的取值提升到较高的概念层次上，从而形成新的统计查询结果，并进行分析。
4. 数据细化(drilldown):将多维下标的取值降低到较低的概念层次_上，从而形成更细致的统计查询结果，并进行分析。
5. 旋转(Pivot/Rotate) :调整维的排列次序的动作称为旋转

| ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/35.png) | ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/36.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/37.png) | ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/39.png) |
| ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/40.png) |                                                              |

### 1.15. 商务智能各个部件的概念

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/exam/5.png)

1. 第一部分：**数据源**
2. 第二部分：**数据获取**
   1. 最重要的ETL
   2. 用数据建模工具和其他工具进行管理
   3. 使用元数据类型来决定数据的形式
3. 第三部分：**数据存储和管理**：所有的数据都应该涵盖在这些数据中，一半的数据存储和管理 + 信息获取。
4. 第四部分：**信息获取**：这部分已经成为信息
   1. 和主题相关的数据项
   2. 主题：拥有共同上下文的综合体

## 2. 其他知识点补充

### 2.1. 数据、信息与知识

1. 知识：**知识**是头脑中的见识和背景，需要反思和综合，知识难以构造，难以在机器上捕获和转移，通常是**默认信息**
2. 信息：**信息**是具有相关性和目的的数据，我们需要对信息的意义达成共识，必须是被人为调制处理后的。
3. 数据：数据是有关世界的客观事实，**易于组织和捕获、转移**
4. 数据 + 上下文 $\rightarrow$ 信息

### 2.2. 为什么需要商务智能？

1. 许多数据仓库解决方案共同的一个缺点就是系统的开发者**总是专注于软件技术，而不是商业解决方案**。
2. 数据仓库解决方案的另一个问题是：**人们仍然过多地关心如何建立数据仓库，而不是如何对它进行访问**，然而这只是一个开始。

### 2.3. 商务智能是什么？目标是什么？

1. BI的定义
   1. 从数据到信息，BI是将数据转换为有意义的内容的过程
   2. 访问、钻研、分析和挖掘数据获得启发和了解，从而提供更完善和更全面考虑的决策支持
2. BI的目标
   1. **决策支持**(Decision-making Supporting)
   2. **改善信息访问**(Information access-improving)
3. 商务智能系统不仅支持最新的**IT技术**，同时也提供了**打包的应用解决方案**

### 2.4. 数据挖掘

1. **数据挖掘**就是对数据库或数据仓库中**蕴涵的、未知的、非平凡的、有潜在应用价值**的模式或规则的提取
   1. 基于数据库和数据仓库是**任意**的，也可以**不面向如上两个**。一般是面向数据库和数据仓库，如果没有数据库和数据仓库，则需要将构建这二者的相应的操作都做一遍
   2. **这些模式(规则)的提取**：不要求是有效的模式，不要求规则是公理
   3. **蕴涵**：一定是有隐含对应的关系
      1. 不能告诉你解释：因为不支持对当前的数据集(未知)的解释
      2. 不能不告诉你解释，因为是根据之前的数据集的解释
   4. **未知的**：是没有发现的规律
   5. **非平凡**：有一定的概率是对的，有一定的概率是错的，在当前的数据集上有一定的百分比成立
   6. **潜在应用价值**：当前数据挖掘的结果，如果不能有一个所谓的未知性，那么是不存在潜在的应用价值的。
2. 用于发掘数据中**隐藏的模式**：数据的规律是针对这一部分数据和相似数据是成立的，但是对于其数据不一定是成立的。
3. 需要借鉴各种相关领域的理论和方法
4. 用于发现**隐藏模式**的算法既可以是自动进行，也可以在人工指导下完成
5. 数据挖掘方法
   1. **特征化与区分**：特征工程
   2. **关联规则挖掘**：若干个不同规律出现的频繁程度，A在则B一定在。
   3. **分类挖掘**：根据已有分类标签来提取分类规律，建立一般数据和分类标签的映射。
   4. **聚类挖掘**：将用户分为几个小的类别，但是不确定会将同学们分为什么类别，根据特性拆分为小组。
   5. **时序和挥发性数据挖掘**：有些数据是具有时序性的，有些数据是没有必要进行持久化，挥发性数据可能需要我们进行一定的决策，但是有一些时序性数据需要是在线的。
   6. **异常分析**：上面五点是通过对一般的数据进行分析，部分时候异常信息会包含有较多的信息量，比如有一位同学四处进行大额汇款(出现异常情况，和日常消费习惯不一样)
6. 面向的数据类型(其他的数据挖掘方式)
   1. 关系型数据
      1. 事务型数据库
      2. 数据仓库
   2. 文本数据挖掘
   3. Web挖掘
   4. 空间数据挖掘
   5. 多媒体数据挖掘

### 2.5. 商务智能的发展方向

1. 分布式
2. 插件化
3. 大众化

### 2.6. 操作型数据和分析型数据

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/1.png)

### 2.7. 信息系统发展

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec2/2.png)

### 2.8. 为什么建立数据仓库

为了适应因市场商业经营行为的改变和市场竞争程度的加剧而进行的分析型处理的需要

### 2.9. ETL工具分类

1. **产生源代码的软件**：能力强大，但是比较烦
2. 产生**参数化**的运行时**模块**的软件

### 2.10. 数据仓库的数据组织形式

1. 简单堆积文件
   1. 概念：将数据库中提取加工的数据，直接积累存储
   2. 操作：来一个存放一个，按照时间先后顺序存放，堆积
2. 轮转堆积文件
   1. 概念：将数据的存储单位，分成若干级别，每个级别有有限个指定的数据;
   2. 数据形式：一定时间段的综合数据，称为轮转记录;
   3. 优点：结构简单，数据量比"简单堆积文件"少；
   4. 缺点：综合数据，会损失数据细节，越久远的历史数据，数据细节损失的越多；
   5. 操作：够一个时间段，就将指定长度的数据综合在一起； 每次综合都会损失一的数据细节;
   6. 示例：如果数据积累够 1 天，直接综合成一天的数据;如果数据积累够 30 天，直接综合成一个月的数据;如果数据积累够12个月，直接综合成一年的数据，小时的数据不超过24个，天的数据不超过30个，月的数据不超过12个；
3. 简化直接文件
   1. 概念：按照一定时间间隔，对数据库采样；
   2. 快照：每隔一定时间，做一个数据库快照，存储该快照，与"简单堆积文件"类似；
   3. 示例：周一对数据做一个快照，周二在做一个快照，每天都做一个数据库快照，存储下来；
   4. 缺点：浪费存储空间；
4. 连续文件
   1. 在上述"简化直接文件"快照的基础之上，进行增量更新，只更新对比后的差异数据；
   2. 概念：两个连续简化的直接文件，对比两个文件的差异，生成连续文件；
   3. 连续文件 + 新的简单文件 = 新的连续文件

### 2.11. 元数据

1. **通过元数据可以将数据仓库和复杂的数据源系统的变化隔离，是数据仓库开发和维护的一个关键因素，也是保证数据抽取质量的依据**，应该想办法用自然语言描述
2. **元数据一般存放于数据仓库中并受元数据管理系统的管理**，这被称为**元数据管理**。

### 2.12. OLAP&OLTP

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/1.png)

### 2.13. Codd对OLAP的评价原则

1. OLAP必须提供多维概念视图
2. 透明性准则
3. 存取能力准则
4. 稳定的报表功能
5. 客户/服务器体系结构
6. 维的同等性原则
7. 动态的稀疏矩阵处理准则
8. 多用户支持能力准则
9. 非受限的跨维操作
10. 直观的数据操作
11. 灵活的报表生成
12. 不受限维与聚集层次

### 2.14. MOLAP&ROLAP

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec3/8.png)

### 2.15. ROLAP优化手段

1. 采用**物化视图**方式：存储**物化视图**，之后就可以直接调用，将视图这种"虚表"形式转换成**实际存在的二维表**，以达到快速取得综合数据的目的
2. 采用**特殊的索引与集簇**方式，以加速星型模式内表的联接速度
3. 尽量采用**并行操作**方式以提高处理速度
4. 采用OLAP中的**查询优化**技术，如共享排序技术等
5. 采用**增量**技术，在OLAP数据更新时保留不变的数据，仅更改变动的数据以加快数据更新速度

### 2.16. 物化视图

1. 为了提高对统计信息的查询速度，我们可以预先计算好数据视图中的**统计信息**并保存在数据仓库中，这称为**物化视图**，即将虚的视图转变成实际的视图
2. 数据立方体的物化
   1. **不进行物化**
   2. **全物化**：n维 L层的立方体包含$T = \prod\limits_{i=1}\limits^{n}(L_i+1)$种子方，之所以加1是因为包含了All层次
   3. **部分物化**

### 2.17. 生命周期

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec4/1.png)

### 2.18. 数据仓库的设计原则(展开)

1. 面向主题原则：构建数据仓库的目的是**面向企业的管理人员，为经营管理提供决策支持信息**。因此，数据仓库的组织设计必须以用户决策的需要来确定，即从用户决策的**主观需求**(主题)开始
2. 数据驱动原则：在数据仓库设计中，由于其所有数据均应建立在**已有的数据库基础**上，即是从已经存在于操作型环境中的数据出发进行数据仓库的设计，这种设计方法被称为 "数据驱动" 方法
3. 原型法设计原则

### 2.19. 数据仓库设计的三级数据模型

1. 概念模型
2. 逻辑模型
3. 物理模型

### 2.20. 数据仓库的设计步骤

1. 系统规划
   1. 明确主题
   2. 技术准备
2. 概念设计
   1. 确定系统边界
   2. 确定主要的主题及其内容
   3. OLAP等分析应用的设计：一般将数据划分为**详细数据、轻度总结、高度总结**三种粒度，或者采用更多级的粒度划分方法
3. 逻辑设计
   1. 将E-R图转换成关系数据库的二维表
   2. 定义数据源和数据抽取规则
   3. 在逻辑模型的设计过程中，需要考虑以下一些问题:
      1. 适当的粒度划分
      2. 合理的数据分割策略
      3. 定义合适的数据来源
4. 物理设计
5. 数据仓库生成
6. 数据仓库运行与维护

### 2.21. 维度建模的设计过程

1. 选取要建模的业务处理过程
2. 定义业务处理的粒度
3. 选择事实表中的维度
4. 选择事实表中的度量值
5. 通过计算而获得的可加性度量值也应该物理存储在事实表中，如：毛利润金额。
6. 不具有可加性的计算结构则应该由数据存取工具在访问过程中进行计算，如：毛利润率。

### 2.22. OLAP

1. 通过专门的**数据综合引擎**，辅之以更加直观的**数据访问界面**，力图统一分散的**公共应用逻辑**，在**短时间**内响应**非数据处理专业人员**的复杂查询要求。1993年，E.F. Codd将这类技术定义为OLAP

### 2.23. 数据仓库的生命周期

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec4/22.png)

### 2.24. 粒度划分模型：事务，周期快照，累积快照

1. 事务：
   1. 记录的事务层面的事实，保存的是**最原子的数据**，又称"原子事实表"，事务事实表中的数据在事务时间发生后产生。
   2. 粒度是一条**记录**，比如银行转账1块钱。
   3. 更新方式是**增量更新**，具有**稀疏**性质，因为很多的事实可能不同时发生，是稀疏表，只有当天发生了操作才有记录。
2. 周期快照：
   1. 以**具有规律性的、可预见**的时间间隔来记录事实，统计的是间隔周期内的度量统计。时间间隔：年、月、日等。
   2. 周期快照**没有粒度**的概念，是周期+状态度量的组合，其粒度是每个时间段一条记录。
   3. 周期快照事实表维度少于事务事实表，但是记录的事实要多于事实事务表。
   4. 更新方式是增量更新，是**稠密表**，哪怕当天没操作也会有记录
   5. 用于记录重复的可预测时间间隔的事实，比如每月账单。
3. 累积快照
   1. 累积快照事实表存储的是**不确定的周期**的数据，他完全覆盖了一个事务或一个产品的**生命周期**的时间跨度，通常有多个日期字段来记录关键时间点，比如订单的付款时间、发货时间、收货时间等。
   2. 累积快照事实表**只会有一条记录，数据会一直更新到过程结束**。
   3. 通常包含很多日期字段，并且会有一个用户只是最后更新日期的附加日期字段。
   4. 用于记录较短周期，有着明确开始和结束状态等多个状态的过程。

### 2.25. 例子一：零售营销

1. 使用**维度支架**的方式连接，也就是首次开业日会作为FK连接到另一张表上。
2. 非事实型事实表不包含**度量维度**。
3. 退化维度：**维度表为空，具体的维度值直接存放在事实表中**，订单编号用于对订单上的分列项目进行**分组**，因此仍然有效，偶尔用于数据仓库**反向连接操作型领域**
4. 模型的演化
   1. 新的维度属性(例如，产品的全新描述属性)
      1. 加入时间点前的，使用"**不可用**"进行填充
      2. 比如添加了是否转基因的条目，那么之前为空的部分，就用"**不可用**"进行填充。
   2. 新的维度(例如，会员、店员、日间时间等分析的新角度)
      1. 新的维表
      2. 在事实表中填加新的外关键字
   3. 新的度量值事实
      1. 添加新的度量值属性
      2. 需要考虑事实表粒度
   4. 维度变得具有更多的粒度性
      1. 建立**新粒度层次**上的**维度表**
      2. 可能带来**新粒度层次**上的**事实表**，从而需要同时建立新的维度表和事实表，新的维度表会添加新的事实。
   5. 全新的数据源的加入，会同时牵涉**现存的维度和不能预见的新维度**
      1. 新数据源几乎总是拥有自己的**粒度和维度**
      2. 建立新的事实表和维度表
5. 规范化和非规范化

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/22.png)

6. **代理关键字**，避免直接使用操作型数据作为维度表和事实表的**主关键字和外关键字**：性能优势、缓冲、历史一致性

### 2.26. 例子二：库存管理

1. 四步维度建模
   1. 业务处理过程：零售商场的库存
   2. 粒度：每个商场每天每种商品的库存
   3. 维度：最初的维度选择
      1. 日期、商场、商品
      2. 促销：如果我们认为这是有用的，那么我们可以这样做。
   4. 事实(度量值)：库存数量
2. **半加型事实**：只在**部分维度**上具有**可加性**的度量值
3. **一致性维度**是进一步开发总线结构数据仓库系统的**基础**
   1. 一致的**维度关键字**
   2. 一致的**属性列名字**
   3. 一致的**属性定义**
   4. 一致的**属性值**

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/36.png) ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/37.png)

4. 同样的事实在不同的数据备份中进行存储的**一致性**
   1. **取值单位**的一致性
   2. **值**的一致性
   3. **自然关键字**的一致性
5. 数据仓库中不允许**编码格式**

### 2.27. 例子三：订单管理

1. 规范化
   1. 规范化拆分的时候往往后面的互斥属性会节约空间，但是前面的属性会冗余可能会导致浪费空间，需要进行考虑。
   2. 有上下文环境访问拆分后的表，需要用很多次查询才可以拿到原来应该得到的属性，也就是这种操作不一定节约空间，一定浪费时间
2. 规范化时机
   1. 事实行的事实设置比较**稀疏**
   2. 不在事实之间施**加运算**
3. 反规范化节约空间又节约时间，所以我们乐意这样干，但是有时候反规范化会导致**误导**和**粒度不兼容**：按照摊派的思想，我们要将订单的折扣摊派给每一个元组，但是可能会导致**分析误导**：订单折扣和其他的部分关联非常大，订单折扣和**谈判人员**是有关的。
4. 角色扮演：后台只维持一个单一的日期维度表，类似数据库的View
   1. 为事实表中的每一个日期外关键字建立一个**日期维表上的视图**，类似的也可以用上角色模仿(比如员工的模仿)
   2. 优点：降低存储空间开销，方便使用
5. 当**实体之间存在固定的、不随时间变化的、强烈相关的关系**时，需要作为**单一维度**进行建模，而其他情况下需要分割
6. 杂项维度：从复杂的数据源中提取与**事实、维度相关**的字段后，**往往还有大量在小范围内选取离散值的指示符与标志**，这些维度和其他维度都没有关联，他们之间也只有少量的关联，由于没有足够的空间，则将他们压缩到一个维度中。
   1. 可以将**它们组装成一个或多个独立的杂项维度表(junk dimension)**
   2. 杂项维度使用**非编码**属性
7. **订单标题事实到订单分列项的分配**：订单标题事实由于包含订单折扣，所以是不可以替代的，设计到反规范化的问题：在较低层次事实表中尽可能包含所有可用的**高层事实表**中的事实

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/45.png)

8. 因子一般不作为维度表属性，而作为事实表的属性

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/51.png)

9. 三种不同类型的实时分区
   1. 事务粒度：当天的记录(并非统计结果)，可能不建立索引
   2. 周期快照：最近一个周期内的统计结果，对非/半加性事实的考虑
   3. 累积快照：只记录最近被更新的项，**无需索引和聚集**

### 2.28. 例子四：客户关系管理

1. 日期维度支架：区别角色扮演，具有更多的专有属性
2. 低基数属性
   1. 只有**少量几个取值**的属性
   2. 大量元组共享了**相同的属性和属性组**，这很可能就是我们看到的上下文信息
3. 支架维度
   1. 将一组**低基数属性**单独构成客户维度的一个维度(称为**支架维度**)，从而使整个模型呈雪花状
   2. 支架维度中的数据一般是从外部数据提供者那里获得的，如：县人口统计支架维度
   3. 如果用户的查询工具坚持使用星型结构，那么可以通过视图定义来隐藏维度支架
4. 数据仓库**刷新频率**可以不一样，维表中如果有一个属性发生了变化，为了更新数据历史完整化，那么我们必须要复制一个元组，如果没有维度支架，那么就要复制整体，而如果有维度支架则只需要复制部分。

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/57.png)

4. 深度可变体系客户维度
   1. 桥接表 - 自顶向下：客户维度对应客户体系桥中的**父客户关键字**
   2. 桥接表 - 自下而上：客户维度对应客户体系桥中的子客户关键字

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/66.png) ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/67.png) 

5. 体系桥接连表样本行
   1. 体系桥接连表样本行数计算公式：
      1. 用每层的取值数目乘以层深度(从顶层开始计数)，然后将乘积相加起来
      2. $体系桥接表样本行数 = \sum(层取值数目 * 层深度)$
   2. 例：$1×1+2×2+3×3+2×4 = 22$

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/65.png) ![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Business-Intelligence/img/lec5/68.png) 

### 2.29. 数据资源利用的方式

1. 数据资源的查询服务
2. 数据资源的演绎
   1. 知识的利用与搜索（AI）
   2. 演绎数据库
   3. 统计分析软件（SAS，SPSS）
   4. OLAP
3. 数据资源的归纳
   1. 数据挖掘：数据资源的归纳
